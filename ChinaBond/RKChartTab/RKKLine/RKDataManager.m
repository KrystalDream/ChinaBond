//
//  RKDataManager.m
//  RKKLineDemo
//
//  Created by Jiaxiaobin on 15/12/2.
//  Copyright © 2015年 RK Software. All rights reserved.
//

#import "RKDataManager.h"
#import "RKRateInfoModel.h"


@implementation RKDataManager
{
    NSString *_data1;
    NSString *_data2;
    NSString *_data3;
    NSArray *_rateInfoData;
    RKKLineModel *_model;
}
#pragma mark - 单例实现
static RKDataManager *_sharedInstance;
+ (id)sharedInstance
{
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        _sharedInstance = [[self alloc] init];
    });
    return _sharedInstance;
}

- (instancetype)init
{
    if (self = [super init]) {
        
        _dateFormatter = [[NSDateFormatter alloc] init];
        [_dateFormatter setDateFormat:@"yyyy-MM-dd"];
        _dateFormatter2 = [[NSDateFormatter alloc] init];
        [_dateFormatter2 setDateFormat:@"yyyyMMdd"];
        
    }
    return self;
}

+ (id)copyWithZone:(NSZone *)zone
{
    return self;
}
+ (id)retain
{
    return self;
}
+ (oneway void)release
{
    //do nothing
}
+ (id)autorelease
{
    return self;
}

- (void)test
{
    _data1 = @"{\"errorMsg\":\"\",\"state\":\"0\",\"queryDate\":\"20140504\",\"xValues\":[\"20140304\",\"20140305\",\"20140306\",\"20140307\",\"20140310\",\"20140311\",\"20140312\",\"20140313\",\"20140314\",\"20140317\",\"20140318\",\"20140319\",\"20140320\",\"20140321\",\"20140324\",\"20140325\",\"20140326\",\"20140327\",\"20140328\",\"20140331\",\"20140402\",\"20140403\",\"20140404\",\"20140408\",\"20140410\",\"20140411\",\"20140414\",\"20140415\",\"20140416\",\"20140417\",\"20140418\",\"20140421\",\"20140422\",\"20140423\",\"20140424\",\"20140425\",\"20140428\",\"20140429\",\"20140430\",\"20140504\"],\"yValues\":[143.69747715,143.42336141,143.36389969,143.44070086,143.62643713,143.68664719,143.79263037,143.91505611,144.04153368,144.10865301,143.95790636,143.80843507,143.76592761,143.84933801,143.84969243,143.83985582,143.87288431,143.87424761,143.8530889,143.95113265,143.84405101,143.71831251,143.73133251,143.87384076,143.83943779,143.98346511,144.23643327,144.38720892,144.52243375,145.09252145,145.08191129,145.15154352,145.18563326,145.0676439,145.05848764,145.10402563,145.16035864,145.26113382,145.43192867,145.61164262],\"y1Values\":[110.0733412,109.8475823,109.7888842,109.8362366,109.94343729,109.97781371,110.04778312,110.13051736,110.21640407,110.23120005,110.10159714,109.97297963,109.92748309,109.97981904,109.94268059,109.92257232,109.93574351,109.92432594,109.89542417,109.93405827,109.82600005,109.71593659,109.71353855,109.77396491,109.72223227,109.82134202,109.97981129,110.08407633,110.1763104,110.60541278,110.58450763,110.6007252,110.61456279,110.51071092,110.49106379,110.51373318,110.5194736,110.5848232,110.70429958,110.79289972]}";
    _data2 = @"{\"errorMsg\":\"\",\"state\":\"0\",\"lists\":[{\"nodeid\":\"8a8b2ca048459f7b014845b556810003\",\"pid\":\"0\",\"nodename\":\"中债中短期票据曲线\",\"childs\":[{\"nodeid\":\"2c9081e9257ddf2a012590efdded1d35\",\"pid\":\"8a8b2ca048459f7b014845b556810003\",\"nodename\":\"银行间中短期票据收益率曲线(超AAA)\",\"childs\":[]},{\"nodeid\":\"2c9081880fa9d507010fb8505b393fe7\",\"pid\":\"8a8b2ca048459f7b014845b556810003\",\"nodename\":\"银行间中短期票据收益率曲线(AAA)\",\"childs\":[]},{\"nodeid\":\"2c9081e916d362e1011786ced5921dd4\",\"pid\":\"8a8b2ca048459f7b014845b556810003\",\"nodename\":\"银行间中短期票据收益率曲线(AAA-)\",\"childs\":[]},{\"nodeid\":\"2c90818811d3f4ae0111e8b341f560e0\",\"pid\":\"8a8b2ca048459f7b014845b556810003\",\"nodename\":\"银行间中短期票据收益率曲线(AA+)\",\"childs\":[]},{\"nodeid\":\"2c9081e50a2f9606010a30acdae40176\",\"pid\":\"8a8b2ca048459f7b014845b556810003\",\"nodename\":\"银行间中短期票据收益率曲线(AA)\",\"childs\":[]},{\"nodeid\":\"2c90818811d3f4ae0111e8d016e560e6\",\"pid\":\"8a8b2ca048459f7b014845b556810003\",\"nodename\":\"银行间中短期票据收益率曲线(AA-)\",\"childs\":[]},{\"nodeid\":\"2c90818811d3f4ae0111e8d828f360eb\",\"pid\":\"8a8b2ca048459f7b014845b556810003\",\"nodename\":\"银行间中短期票据收益率曲线(A+)\",\"childs\":[]},{\"nodeid\":\"2c9081880fa9d507010fb87a87a0429b\",\"pid\":\"8a8b2ca048459f7b014845b556810003\",\"nodename\":\"银行间中短期票据收益率曲线(A)\",\"childs\":[]},{\"nodeid\":\"2c90818811d3f4ae0111e8d9d25060ed\",\"pid\":\"8a8b2ca048459f7b014845b556810003\",\"nodename\":\"银行间中短期票据收益率曲线(A-)\",\"childs\":[]},{\"nodeid\":\"2c9081e92487c059012499d4679250de\",\"pid\":\"8a8b2ca048459f7b014845b556810003\",\"nodename\":\"银行间浮动利率中短期票据(1y)点差收益率曲线(AAA)\",\"childs\":[]},{\"nodeid\":\"2c9081e923ed41a3012403afcff27a0a\",\"pid\":\"8a8b2ca048459f7b014845b556810003\",\"nodename\":\"银行间浮动利率中短期票据(1y)点差收益率曲线(AA+)\",\"childs\":[]},{\"nodeid\":\"2c9081e9236e239d01237eb2732f687b\",\"pid\":\"8a8b2ca048459f7b014845b556810003\",\"nodename\":\"银行间浮动利率中短期票据(1y)点差收益率曲线(AA)\",\"childs\":[]},{\"nodeid\":\"2c9081e927e3c6700127fff533d16e14\",\"pid\":\"8a8b2ca048459f7b014845b556810003\",\"nodename\":\"银行间浮动利率中短期票据(1y)点差收益率曲线(AA-)\",\"childs\":[]},{\"nodeid\":\"2c9081e92527657c01252a102c090006\",\"pid\":\"8a8b2ca048459f7b014845b556810003\",\"nodename\":\"银行间浮动利率中短期票据(1y)点差收益率曲线(A-)\",\"childs\":[]},{\"nodeid\":\"2c9081e9243a80f5012475d27e113280\",\"pid\":\"8a8b2ca048459f7b014845b556810003\",\"nodename\":\"银行间浮动利率中短期票据(SHIBOR_1Y_20D)点差收益率曲线(AAA)\",\"childs\":[]},{\"nodeid\":\"2c9081e92527657c0125578b518b2103\",\"pid\":\"8a8b2ca048459f7b014845b556810003\",\"nodename\":\"银行间浮动利率中短期票据(SHIBOR_1Y_20D)点差收益率曲线(AA+)\",\"childs\":[]}]},{\"nodeid\":\"8a8b2ca048459f7b014845b78c680006\",\"pid\":\"0\",\"nodename\":\"中债央行票据曲线\",\"childs\":[{\"nodeid\":\"2c9081e50a2f9606010a306b47e20005\",\"pid\":\"8a8b2ca048459f7b014845b78c680006\",\"nodename\":\"央行票据收益率曲线\",\"childs\":[]}]},{\"nodeid\":\"8a8b2ca048459f7b014845bab5ae000c\",\"pid\":\"0\",\"nodename\":\"中债地方政府债曲线\",\"childs\":[{\"nodeid\":\"2c9081ec2a6ca739012a78db0d8e048a\",\"pid\":\"8a8b2ca048459f7b014845bab5ae000c\",\"nodename\":\"地方政府债收益率曲线\",\"childs\":[]}]},{\"nodeid\":\"8a8b2ca048459f7b014845b8b5fe000a\",\"pid\":\"0\",\"nodename\":\"中债企业债曲线\",\"childs\":[{\"nodeid\":\"2c9081e50a2f9606010a309f4af50111\",\"pid\":\"8a8b2ca048459f7b014845b8b5fe000a\",\"nodename\":\"中债企业债收益率曲线(AAA)\",\"childs\":[]},{\"nodeid\":\"8a8b2ca045e879bf014607ebef677f8e\",\"pid\":\"8a8b2ca048459f7b014845b8b5fe000a\",\"nodename\":\"中债企业债收益率曲线(AAA-)\",\"childs\":[]},{\"nodeid\":\"2c908188138b62cd01139a2ee6b51e25\",\"pid\":\"8a8b2ca048459f7b014845b8b5fe000a\",\"nodename\":\"中债企业债收益率曲线(AA+)\",\"childs\":[]},{\"nodeid\":\"2c90818812b319130112c279222836c3\",\"pid\":\"8a8b2ca048459f7b014845b8b5fe000a\",\"nodename\":\"中债企业债收益率曲线(AA)\",\"childs\":[]},{\"nodeid\":\"8a8b2ca045e879bf014607f9982c7fc0\",\"pid\":\"8a8b2ca048459f7b014845b8b5fe000a\",\"nodename\":\"中债企业债收益率曲线(AA-)\",\"childs\":[]},{\"nodeid\":\"2c9081e91b55cc84011be40946ca0925\",\"pid\":\"8a8b2ca048459f7b014845b8b5fe000a\",\"nodename\":\"中债企业债收益率曲线(A+)\",\"childs\":[]},{\"nodeid\":\"2c9081e91e6a3313011e6d438a58000d\",\"pid\":\"8a8b2ca048459f7b014845b8b5fe000a\",\"nodename\":\"中债企业债收益率曲线(A)\",\"childs\":[]},{\"nodeid\":\"8a8b2ca04142df6a014148ca880f3046\",\"pid\":\"8a8b2ca048459f7b014845b8b5fe000a\",\"nodename\":\"中债企业债收益率曲线(A-)\",\"childs\":[]},{\"nodeid\":\"2c9081e91ea160e5011eab1f116c1a59\",\"pid\":\"8a8b2ca048459f7b014845b8b5fe000a\",\"nodename\":\"中债企业债收益率曲线(BBB+)\",\"childs\":[]},{\"nodeid\":\"8a8b2ca0455847ac0145650780ad68fb\",\"pid\":\"8a8b2ca048459f7b014845b8b5fe000a\",\"nodename\":\"中债企业债收益率曲线(BBB)\",\"childs\":[]},{\"nodeid\":\"8a8b2ca0455847ac0145650ba23b68ff\",\"pid\":\"8a8b2ca048459f7b014845b8b5fe000a\",\"nodename\":\"中债企业债收益率曲线(BB)\",\"childs\":[]},{\"nodeid\":\"8a8b2ca0455847ac0145650c3d726901\",\"pid\":\"8a8b2ca048459f7b014845b8b5fe000a\",\"nodename\":\"中债企业债收益率曲线(B)\",\"childs\":[]},{\"nodeid\":\"8a8b2ca0455847ac0145650d03d26903\",\"pid\":\"8a8b2ca048459f7b014845b8b5fe000a\",\"nodename\":\"中债企业债收益率曲线(CCC)\",\"childs\":[]},{\"nodeid\":\"8a8b2ca0447ffc96014491641747535e\",\"pid\":\"8a8b2ca048459f7b014845b8b5fe000a\",\"nodename\":\"中债企业债收益率曲线（ＣＣ）\",\"childs\":[]},{\"nodeid\":\"2c9081e50ef55a4d010f09151b275952\",\"pid\":\"8a8b2ca048459f7b014845b8b5fe000a\",\"nodename\":\"中债浮动利率企业债(Depo-1Y)点差曲线(AAA)\",\"childs\":[]},{\"nodeid\":\"2c9081e50ef55a4d010f09c4abda599c\",\"pid\":\"8a8b2ca048459f7b014845b8b5fe000a\",\"nodename\":\"银行间浮动利率企业债(R07D_2W)点差收益率曲线(AAA)\",\"childs\":[]},{\"nodeid\":\"2c908188157846cb0115834f64715689\",\"pid\":\"8a8b2ca048459f7b014845b8b5fe000a\",\"nodename\":\"银行间浮动利率企业债(SHIBOR_1W_120D)点差收益率曲线(AAA)\",\"childs\":[]},{\"nodeid\":\"2c9081e92487c05901249f4a2bc9752f\",\"pid\":\"8a8b2ca048459f7b014845b8b5fe000a\",\"nodename\":\"银行间浮动利率企业债(SHIBOR_3M_5D)点差收益率曲线(AAA)\",\"childs\":[]}]},{\"nodeid\":\"8a8b2ca048459f7b014845bb0d3a000e\",\"pid\":\"0\",\"nodename\":\"中债政策性金融债曲线\",\"childs\":[{\"nodeid\":\"2c9081e50a2f9606010a306abdde0003\",\"pid\":\"8a8b2ca048459f7b014845bb0d3a000e\",\"nodename\":\"银行间固定利率政策性金融债收益率曲线(进出口行和农发行)\",\"childs\":[]},{\"nodeid\":\"8a8b2ca037a7ca910137bfaa94fa5057\",\"pid\":\"8a8b2ca048459f7b014845bb0d3a000e\",\"nodename\":\"银行间固定利率政策性金融债收益率曲线(国开行)\",\"childs\":[]},{\"nodeid\":\"2c908188138b62cd01139a7dd4211e44\",\"pid\":\"8a8b2ca048459f7b014845bb0d3a000e\",\"nodename\":\"银行间政策性银行浮动利率(SHIBOR_3M_5D)债点差收益率曲线\",\"childs\":[]}]},{\"nodeid\":\"8a8b2ca048459f7b014845bc60260011\",\"pid\":\"0\",\"nodename\":\"中债城投债曲线\",\"childs\":[{\"nodeid\":\"2c9081e91b55cc84011be3c53b710598\",\"pid\":\"8a8b2ca048459f7b014845bc60260011\",\"nodename\":\"中债城投债收益率曲线(AAA)\",\"childs\":[]},{\"nodeid\":\"2c9081e91b55cc84011bd98af3dc1533\",\"pid\":\"8a8b2ca048459f7b014845bc60260011\",\"nodename\":\"中债城投债收益率曲线(AA+)\",\"childs\":[]},{\"nodeid\":\"2c9081e91b55cc84011c07e9991e15c9\",\"pid\":\"8a8b2ca048459f7b014845bc60260011\",\"nodename\":\"中债城投债收益率曲线(AA)\",\"childs\":[]},{\"nodeid\":\"2c9081e916d362e1011752fa2d822f6b\",\"pid\":\"8a8b2ca048459f7b014845bc60260011\",\"nodename\":\"中债城投债收益率曲线(AA(2))\",\"childs\":[]},{\"nodeid\":\"2c9081e91b55cc84011bb097b0e14e96\",\"pid\":\"8a8b2ca048459f7b014845bc60260011\",\"nodename\":\"中债城投债收益率曲线(AA-)\",\"childs\":[]},{\"nodeid\":\"2c9081e91b55cc84011c081e54ce1acd\",\"pid\":\"8a8b2ca048459f7b014845bc60260011\",\"nodename\":\"中债浮动利率城投债(SHIBOR-1Y-10D)点差曲线(AA+)\",\"childs\":[]}]},{\"nodeid\":\"8a8b2ca048459f7b014845bd1b760012\",\"pid\":\"0\",\"nodename\":\"中债资产支持证券曲线\",\"childs\":[{\"nodeid\":\"2c9081880fd78f11010ff14f9c0a02dd\",\"pid\":\"8a8b2ca048459f7b014845bd1b760012\",\"nodename\":\"银行间固定利率资产支持证券收益率曲线(AAA)\",\"childs\":[]},{\"nodeid\":\"8a8b2ca03b733fb1013bda784578582b\",\"pid\":\"8a8b2ca048459f7b014845bd1b760012\",\"nodename\":\"银行间固定利率资产支持证券收益率曲线(AA+)\",\"childs\":[]},{\"nodeid\":\"2c9081880fd78f11010ff15201ad02e1\",\"pid\":\"8a8b2ca048459f7b014845bd1b760012\",\"nodename\":\"银行间浮动利率资产支持证券(R07D_1M)点差收益率曲线(AAA)\",\"childs\":[]},{\"nodeid\":\"2c9081e922adf7720122ded714e4337c\",\"pid\":\"8a8b2ca048459f7b014845bd1b760012\",\"nodename\":\"银行间浮动利率资产支持证券(R07D_1M)点差收益率曲线(AA)\",\"childs\":[]},{\"nodeid\":\"2c9081880fd78f11010ff1526db302e3\",\"pid\":\"8a8b2ca048459f7b014845bd1b760012\",\"nodename\":\"银行间浮动利率资产支持证券点差(1y)收益率曲线(AAA)\",\"childs\":[]},{\"nodeid\":\"2c9081880fd78f11010ff15308d902e5\",\"pid\":\"8a8b2ca048459f7b014845bd1b760012\",\"nodename\":\"银行间浮动利率资产支持证券(R07D_1M)点差收益率曲线(A)\",\"childs\":[]},{\"nodeid\":\"2c90818812b319130112bd0f3d7b6e9b\",\"pid\":\"8a8b2ca048459f7b014845bd1b760012\",\"nodename\":\"银行间浮动利率资产支持证券(1y)点差收益率曲线(A)\",\"childs\":[]},{\"nodeid\":\"2c908188158c8e3901158cd5f35a0001\",\"pid\":\"8a8b2ca048459f7b014845bd1b760012\",\"nodename\":\"银行间浮动利率资产支持证券点差(1y)收益率曲线(BBB)\",\"childs\":[]}]},{\"nodeid\":\"8a8b2ca048459f7b014845bd65ba0014\",\"pid\":\"0\",\"nodename\":\"中债商业银行债曲线\",\"childs\":[{\"nodeid\":\"2c9081e9259b766a0125be8b5115149f\",\"pid\":\"8a8b2ca048459f7b014845bd65ba0014\",\"nodename\":\"银行间固定利率商业银行普通债收益率曲线(AAA)\",\"childs\":[]},{\"nodeid\":\"2c9081e9259b766a0125bea26bcb14ca\",\"pid\":\"8a8b2ca048459f7b014845bd65ba0014\",\"nodename\":\"银行间固定利率商业银行普通债收益率曲线(AA+)\",\"childs\":[]},{\"nodeid\":\"2c9081e9259b766a0125bec71b13156b\",\"pid\":\"8a8b2ca048459f7b014845bd65ba0014\",\"nodename\":\"银行间固定利率商业银行普通债收益率曲线(AA)\",\"childs\":[]},{\"nodeid\":\"2c9081e9259b766a0125bed2ab9d1599\",\"pid\":\"8a8b2ca048459f7b014845bd65ba0014\",\"nodename\":\"银行间固定利率商业银行普通债收益率曲线(AA-)\",\"childs\":[]},{\"nodeid\":\"8a8b2ca041af02480141ca9c3c421b71\",\"pid\":\"8a8b2ca048459f7b014845bd65ba0014\",\"nodename\":\"银行间固定利率商业银行普通债收益率曲线(A+)\",\"childs\":[]},{\"nodeid\":\"2c9081e50a2f9606010a30a8796d0153\",\"pid\":\"8a8b2ca048459f7b014845bd65ba0014\",\"nodename\":\"银行间固定利率商业银行次级债收益率曲线(AAA)\",\"childs\":[]},{\"nodeid\":\"2c9081e50a69df54010a92d596447d00\",\"pid\":\"8a8b2ca048459f7b014845bd65ba0014\",\"nodename\":\"银行间固定利率商业银行次级债收益率曲线(AA+)\",\"childs\":[]},{\"nodeid\":\"2c9081e50a69df54010a92d477ca7cfe\",\"pid\":\"8a8b2ca048459f7b014845bd65ba0014\",\"nodename\":\"银行间固定利率商业银行次级债收益率曲线(AA)\",\"childs\":[]},{\"nodeid\":\"2c9081880fd78f11010ff14ff01902df\",\"pid\":\"8a8b2ca048459f7b014845bd65ba0014\",\"nodename\":\"银行间固定利率商业银行次级债收益率曲线(AA-)\",\"childs\":[]},{\"nodeid\":\"2c90818815f8c5f90115fef75a776345\",\"pid\":\"8a8b2ca048459f7b014845bd65ba0014\",\"nodename\":\"银行间固定利率商业银行次级债收益率曲线(A+)\",\"childs\":[]},{\"nodeid\":\"2c9081e916d362e10117807f8c962f74\",\"pid\":\"8a8b2ca048459f7b014845bd65ba0014\",\"nodename\":\"银行间固定利率商业银行次级债收益率曲线(A)\",\"childs\":[]},{\"nodeid\":\"2c90818812b319130112bd66d68c712c\",\"pid\":\"8a8b2ca048459f7b014845bd65ba0014\",\"nodename\":\"银行间固定利率商业银行次级债收益率曲线(A-)\",\"childs\":[]},{\"nodeid\":\"2c9081e923005d1b01233170ac516637\",\"pid\":\"8a8b2ca048459f7b014845bd65ba0014\",\"nodename\":\"银行间固定利率商业银行次级债收益率曲线(BBB+)\",\"childs\":[]},{\"nodeid\":\"2c9081e9259b766a0125be90a72514af\",\"pid\":\"8a8b2ca048459f7b014845bd65ba0014\",\"nodename\":\"银行间浮动利率商业银行普通债（１ｙ）点差收益率曲线（ＡＡＡ）\",\"childs\":[]},{\"nodeid\":\"2c9081e9259b766a0125bebc1f7b154c\",\"pid\":\"8a8b2ca048459f7b014845bd65ba0014\",\"nodename\":\"银行间浮动利率商业银行普通债(1y)点差收益率曲线(AA+)\",\"childs\":[]},{\"nodeid\":\"2c9081e9259b766a0125bec94b411579\",\"pid\":\"8a8b2ca048459f7b014845bd65ba0014\",\"nodename\":\"银行间浮动利率商业银行普通债(1y)点差收益率曲线(AA)\",\"childs\":[]},{\"nodeid\":\"2c9081e50ef55a4d010f09c6cb57599d\",\"pid\":\"8a8b2ca048459f7b014845bd65ba0014\",\"nodename\":\"银行间浮动利率商业银行次级债(1y)点差收益率曲线(AAA)\",\"childs\":[]},{\"nodeid\":\"2c9081e91ea160e5011eaf0400ac389f\",\"pid\":\"8a8b2ca048459f7b014845bd65ba0014\",\"nodename\":\"银行间浮动利率商业银行次级债(1y)点差收益率曲线(AA+)\",\"childs\":[]},{\"nodeid\":\"2c90818812b319130112c24055f9362e\",\"pid\":\"8a8b2ca048459f7b014845bd65ba0014\",\"nodename\":\"银行间浮动利率商业银行次级债(1y)点差收益率曲线(AA)\",\"childs\":[]},{\"nodeid\":\"2c90818814ecc8a80114f8c2479a2a7b\",\"pid\":\"8a8b2ca048459f7b014845bd65ba0014\",\"nodename\":\"银行间浮动利率商业银行普通债(SHIBOR_3M_5D)点差收益率曲线(AAA)\",\"childs\":[]},{\"nodeid\":\"2c9081e918ad18120118df8466a85d62\",\"pid\":\"8a8b2ca048459f7b014845bd65ba0014\",\"nodename\":\"银行间浮动利率商业银行次级债(SHIBOR_3M_5D)点差收益率曲线(AA)\",\"childs\":[]}]},{\"nodeid\":\"8a8b2ca048459f7b014845b49aa30001\",\"pid\":\"0\",\"nodename\":\"中债国债曲线\",\"childs\":[{\"nodeid\":\"2c9081e50a2f9606010a3068cae70001\",\"pid\":\"8a8b2ca048459f7b014845b49aa30001\",\"nodename\":\"银行间固定利率国债收益率曲线\",\"childs\":[]},{\"nodeid\":\"2c9081e50a2f9606010a306bec930007\",\"pid\":\"8a8b2ca048459f7b014845b49aa30001\",\"nodename\":\"交易所固定利率国债收益率曲线\",\"childs\":[]}]},{\"nodeid\":\"8aaee59047ce57ea0147ce61dd01000f\",\"pid\":\"0\",\"nodename\":\"中债铁道债曲线\",\"childs\":[{\"nodeid\":\"2c9081e91b55cc84011c25e7977b4dac\",\"pid\":\"8aaee59047ce57ea0147ce61dd01000f\",\"nodename\":\"固定利率铁道部收益率曲线\",\"childs\":[]},{\"nodeid\":\"8a8b2ca032e693650132fb180f133097\",\"pid\":\"8aaee59047ce57ea0147ce61dd01000f\",\"nodename\":\"固定利率铁道部收益率曲线(减税)\",\"childs\":[]}]},{\"nodeid\":\"8aaee5904930b28c014931a3e80b0044\",\"pid\":\"0\",\"nodename\":\"自动生成远期期限\",\"childs\":[]},{\"nodeid\":\"8aaee5904922046b01492210e5360001\",\"pid\":\"0\",\"nodename\":\"自动加权曲线yst\",\"childs\":[]},{\"nodeid\":\"8aaee59049368892014936cf9a6f0004\",\"pid\":\"0\",\"nodename\":\"自动点差曲线转换成原生曲线\",\"childs\":[]}]}";
    
    _data3 = @"{\"errorMsg\":\"\",\"state\":\"0\",\"queryDate\":\"20140304\",\"xValues\":[0.0,0.083,0.1,0.1667,0.2,0.25,0.3,0.4,0.5,0.6,0.7,0.75,0.8,0.9,1.0,1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,2.0,2.1,2.2,2.3,2.4,2.5,2.6,2.7,2.8,2.9,3.0,3.1,3.2,3.3,3.4,3.5,3.6,3.7,3.8,3.9,4.0,4.1,4.2,4.3,4.4,4.5,4.6,4.7,4.8,4.9,5.0,5.1,5.2,5.3,5.4,5.5,5.6,5.7,5.8,5.9,6.0,6.1,6.2,6.3,6.4,6.5,6.6,6.7,6.8,6.9,7.0,7.1,7.2,7.3,7.4,7.5,7.6,7.7,7.8,7.9,8.0,8.1,8.2,8.3,8.4,8.5,8.6,8.7,8.8,8.9,9.0,9.1,9.2,9.3,9.4,9.5,9.6,9.7,9.8,9.9,10.0,10.1,10.2,10.3,10.4,10.5,10.6,10.7,10.8,10.9,11.0,11.1,11.2,11.3,11.4,11.5,11.6,11.7,11.8,11.9,12.0,12.1,12.2,12.3,12.4,12.5,12.6,12.7,12.8,12.9,13.0,13.1,13.2,13.3,13.4,13.5,13.6,13.7,13.8,13.9,14.0,14.1,14.2,14.3,14.4,14.5,14.6,14.7,14.8,14.9,15.0,15.1,15.2,15.3,15.4,15.5,15.6,15.7,15.8,15.9,16.0,16.1,16.2,16.3,16.4,16.5,16.6,16.7,16.8,16.9,17.0,17.1,17.2,17.3,17.4,17.5,17.6,17.7,17.8,17.9,18.0,18.1,18.2,18.3,18.4,18.5,18.6,18.7,18.8,18.9,19.0,19.1,19.2,19.3,19.4,19.5,19.6,19.7,19.8,19.9,20.0,20.1,20.2,20.3,20.4,20.5,20.6,20.7,20.8,20.9,21.0,21.1,21.2,21.3,21.4,21.5,21.6,21.7,21.8,21.9,22.0,22.1,22.2,22.3,22.4,22.5,22.6,22.7,22.8,22.9,23.0,23.1,23.2,23.3,23.4,23.5,23.6,23.7,23.8,23.9,24.0,24.1,24.2,24.3,24.4,24.5,24.6,24.7,24.8,24.9,25.0,25.1,25.2,25.3,25.4,25.5,25.6,25.7,25.8,25.9,26.0,26.1,26.2,26.3,26.4,26.5,26.6,26.7,26.8,26.9,27.0,27.1,27.2,27.3,27.4,27.5,27.6,27.7,27.8,27.9,28.0,28.1,28.2,28.3,28.4,28.5,28.6,28.7,28.8,28.9,29.0,29.1,29.2,29.3,29.4,29.5,29.6,29.7,29.8,29.9,30.0,30.1,30.2,30.3,30.4,30.5,30.6,30.7,30.8,30.9,31.0,31.1,31.2,31.3,31.4,31.5,31.6,31.7,31.8,31.9,32.0,32.1,32.2,32.3,32.4,32.5,32.6,32.7,32.8,32.9,33.0,33.1,33.2,33.3,33.4,33.5,33.6,33.7,33.8,33.9,34.0,34.1,34.2,34.3,34.4,34.5,34.6,34.7,34.8,34.9,35.0,35.1,35.2,35.3,35.4,35.5,35.6,35.7,35.8,35.9,36.0,36.1,36.2,36.3,36.4,36.5,36.6,36.7,36.8,36.9,37.0,37.1,37.2,37.3,37.4,37.5,37.6,37.7,37.8,37.9,38.0,38.1,38.2,38.3,38.4,38.5,38.6,38.7,38.8,38.9,39.0,39.1,39.2,39.3,39.4,39.5,39.6,39.7,39.8,39.9,40.0,40.1,40.2,40.3,40.4,40.5,40.6,40.7,40.8,40.9,41.0,41.1,41.2,41.3,41.4,41.5,41.6,41.7,41.8,41.9,42.0,42.1,42.2,42.3,42.4,42.5,42.6,42.7,42.8,42.9,43.0,43.1,43.2,43.3,43.4,43.5,43.6,43.7,43.8,43.9,44.0,44.1,44.2,44.3,44.4,44.5,44.6,44.7,44.8,44.9,45.0,45.1,45.2,45.3,45.4,45.5,45.6,45.7,45.8,45.9,46.0,46.1,46.2,46.3,46.4,46.5,46.6,46.7,46.8,46.9,47.0,47.1,47.2,47.3,47.4,47.5,47.6,47.7,47.8,47.9,48.0,48.1,48.2,48.3,48.4,48.5,48.6,48.7,48.8,48.9,49.0,49.1,49.2,49.3,49.4,49.5,49.6,49.7,49.8,49.9,50.0],\"yValues\":[1.0741,1.2196,1.2164,1.1899,1.1947,1.2085,1.2228,1.2587,2.2778,2.2686,2.2545,2.2518,2.2622,2.3246,2.3962,3.448,3.489,3.5211,3.5464,3.5665,3.5835,3.5993,3.6157,3.6346,3.6579,3.6831,3.7066,3.7287,3.7497,3.7699,3.7896,3.809,3.8286,3.8486,3.8693,3.895,3.9282,3.9669,4.0087,4.0515,4.093,4.1311,4.1635,4.1881,4.2026,4.2104,4.2166,4.2213,4.2247,3.2272,3.2288,3.2299,3.2306,3.2311,3.2318,3.2378,3.2529,3.2747,3.301,3.3295,3.358,3.3841,3.4057,3.4203,3.4259,3.4261,3.4263,3.4264,3.4265,3.4266,3.4266,3.4267,3.4267,3.4267,3.4267,3.4298,3.4381,3.4503,3.4651,3.4813,3.4975,3.5123,3.5245,3.5328,3.5359,3.5354,3.5341,3.5321,3.5297,3.5271,3.5244,3.522,3.52,3.5187,3.5182,3.5187,3.5202,3.5224,3.5252,3.5284,3.532,3.5356,3.5392,3.5425,3.5455,3.5483,3.5512,3.5543,3.5575,3.5608,3.5643,3.5678,3.5715,3.5752,3.5791,3.5831,3.5872,3.5913,3.5955,3.5999,3.6043,3.6087,3.6133,3.6179,3.6226,3.6273,3.632,3.6369,3.6417,3.6466,3.6516,3.6565,3.6615,3.6666,3.6716,3.6767,3.6817,3.6868,3.6918,3.6969,3.702,3.707,3.7121,3.7171,3.7221,3.727,3.7319,3.7368,3.7417,3.7465,3.7512,3.756,3.7606,3.7652,3.7697,3.7742,3.7788,3.7834,3.7881,3.7929,3.7977,3.8025,3.8074,3.8123,3.8172,3.8222,3.8272,3.8322,3.8373,3.8423,3.8474,3.8525,3.8576,3.8626,3.8677,3.8728,3.8779,3.8829,3.8879,3.8929,3.8979,3.9029,3.9078,3.9127,3.9175,3.9223,3.927,3.9317,3.9364,3.941,3.9455,3.9499,3.9543,3.9586,3.9629,3.967,3.9711,3.9751,3.979,3.9828,3.9865,3.9901,3.9936,3.9969,3.0002,3.0034,3.0065,3.0095,3.0124,3.0153,3.0181,3.0208,3.0235,3.026,3.0286,3.031,3.0334,3.0357,3.038,3.0402,3.0423,3.0444,3.0464,3.0483,3.0502,3.0521,3.0539,3.0556,3.0573,3.0589,3.0605,3.062,3.0635,3.0649,3.0663,3.0676,3.0689,3.0701,3.0713,3.0725,3.0736,3.0747,3.0757,3.0768,3.0777,3.0787,3.0796,3.0804,3.0813,3.0821,3.0829,3.0836,3.0843,3.085,3.0857,3.0863,3.0869,3.0875,3.0881,3.0887,3.0892,3.0897,3.0902,3.0907,3.0912,3.0917,3.0921,3.0925,3.093,3.0934,3.0938,3.0942,3.0946,3.0949,3.0953,3.0957,3.0961,3.0965,3.0968,3.0972,3.0976,3.098,3.0984,3.0987,3.0991,3.0996,3.1,3.1004,3.1008,3.1013,3.1017,3.1022,3.1027,3.1032,3.1037,3.1043,3.1048,3.1054,3.106,3.1066,3.1073,3.1079,3.1086,3.1093,3.1101,3.1109,3.1116,3.1124,3.1131,3.1139,3.1147,3.1154,3.1162,3.1169,3.1177,3.1184,3.1192,3.1199,3.1207,3.1214,3.1222,3.1229,3.1237,3.1244,3.1252,3.1259,3.1266,3.1274,3.1281,3.1289,3.1296,3.1303,3.1311,3.1318,3.1326,3.1333,3.134,3.1348,3.1355,3.1362,3.137,3.1377,3.1384,3.1391,3.1399,3.1406,3.1413,3.1421,3.1428,3.1435,3.1442,3.145,3.1457,3.1464,3.1471,3.1479,3.1486,3.1493,3.15,3.1508,3.1515,3.1522,3.1529,3.1537,3.1544,3.1551,3.1558,3.1566,3.1573,3.158,3.1587,3.1594,3.1602,3.1609,3.1616,3.1623,3.1631,3.1638,3.1645,3.1652,3.1659,3.1667,3.1674,3.1681,3.1688,3.1696,3.1703,3.171,3.1717,3.1725,3.1732,3.1739,3.1746,3.1754,3.1761,3.1768,5.1776,5.1783,5.179,5.1797,5.1805,5.1812,5.1819,5.1827,5.1834,5.1841,5.1849,5.1856,5.1863,5.187,5.1877,5.1883,5.189,5.1897,5.1904,5.191,5.1917,5.1923,5.193,5.1936,5.1942,5.1948,5.1954,5.1961,5.1967,5.1973,5.1978,5.1984,5.199,5.1996,5.2002,5.2007,5.2013,5.2019,5.2024,5.203,5.2035,5.204,5.2046,5.2051,5.2056,5.2062,5.2067,5.2072,5.2077,5.2082,5.2088,5.2093,5.2098,5.2103,5.2108,5.2113,5.2118,5.2122,5.2127,5.2132,5.2137,5.2142,5.2147,5.2152,5.2156,5.2161,5.2166,5.2171,5.2176,5.218,5.2185,5.219,5.2194,5.2199,5.2204,5.2209,5.2213,5.2218,5.2223,5.2228,5.2232,5.2237,5.2242,5.2247,5.2251,5.2256,5.2261,5.2266,5.2271,5.2275,5.228,5.2285,5.229,5.2295,5.23,5.2305,5.231,5.2315,5.232,5.2325,5.233,5.2335,5.234,5.2346,5.2351,5.2356,5.2361,5.2367,5.2372]}";
    
    NSError *error = nil;
    NSDictionary *dataDic = [NSJSONSerialization JSONObjectWithData:[_data3 dataUsingEncoding:NSUTF8StringEncoding] options:NSJSONReadingMutableLeaves error:&error];
    NSArray *xData = [dataDic objectForKey:@"xValues"];
    NSArray *yData = [dataDic objectForKey:@"yValues"];
    
    NSDictionary *dataDic2 = [NSJSONSerialization JSONObjectWithData:[_data1 dataUsingEncoding:NSUTF8StringEncoding] options:NSJSONReadingMutableLeaves error:&error];
    NSArray *xData2 = [dataDic2 objectForKey:@"xValues"];
    NSArray *yData2 = [dataDic2 objectForKey:@"yValues"];
    
    _model = [[RKKLineModel alloc] init];
    _model.xArr = xData;
    _model.yArr = yData;
    
    _timeModel = [[RKKLineModel alloc] init];
    _timeModel.xArr = xData2;
    _timeModel.yArr = yData2;
}

- (NSDate *)twoMonthAgo:(NSDate *)nowDate
{
    NSCalendar *dateCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSCalendarIdentifierGregorian];
    NSInteger unitFlags = NSCalendarUnitYear | NSCalendarUnitMonth | NSCalendarUnitWeekday | NSCalendarUnitDay | NSCalendarUnitHour | NSCalendarUnitMinute | NSCalendarUnitSecond;
    NSDateComponents *dateComponents = [dateCalendar components:unitFlags fromDate:nowDate];
    NSDateComponents *myCompoentes = [[NSDateComponents alloc]init];
    [myCompoentes   setYear:dateComponents.year];
    [myCompoentes   setMonth:(dateComponents.month-12)];
    [myCompoentes   setDay:dateComponents.day];
    NSDate *myDate = [dateCalendar  dateFromComponents:myCompoentes];
    return myDate;
}

- (NSString *)subRateString:(NSString *)data
{
    NSString *newData = nil;
    NSRange range = [data rangeOfString:@"."];
    if (range.location>0 && [data length]>range.location+5) {
        newData = [data substringToIndex:range.location+5];
    }else{
        newData = data;
    }
    return newData;
}
@end
